<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"><title>Kernel Start</title><meta name="generator" content="DocBook XSL Stylesheets V1.76.1"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="article" title="Kernel Start"><div class="titlepage"><div><div><h2 class="title"><a name="idm14641376"></a>Kernel Start</h2></div><div><div class="author"><h3 class="author"><span class="firstname">Leo</span> <span class="surname">Ye</span></h3></div></div></div><hr></div><div class="toc"><p><b>Table of Contents</b></p><dl><dt><span class="sect1"><a href="#idp107152">Prepare</a></span></dt><dt><span class="sect1"><a href="#idp112544">Main Procedure of Kernel</a></span></dt></dl></div><div class="sect1" title="Prepare"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp107152"></a>Prepare</h2></div></div></div><div class="procedure"><ol class="procedure" type="1"><li class="step" title="Step 1">cli before preparation.</li><li class="step" title="Step 2">Prepare kernel stack, just use value stored in esp.</li><li class="step" title="Step 3">Prepare GDT, the address of gdt is new,
				we use a global value defined in "include/global.c".
				But the first 4 descriptors are similar to before,
				and new descrptors could be added below them.</li><li class="step" title="Step 4">Prepare IDT, the contents of idt won't be set yet.</li><li class="step" title="Step 5">Initialize the 8259A chip.</li><li class="step" title="Step 6">Initialize the exception, for each exception,
				add its gate to idt.</li><li class="step" title="Step 7">Initialize 16 maskable interruption include clock,
				keyboard and so on. </li><li class="step" title="Step 8">Prepare TSS.</li><li class="step" title="Step 9">Prepare LDT, it is 6th descriptor in GDT.
				And our simple process will use it.</li><li class="step" title="Step 10">load gdt, idt, tss which we have prepared.</li><li class="step" title="Step 11">Jump to main procedure of kernle, finally we can code with C.</li></ol></div></div><div class="sect1" title="Main Procedure of Kernel"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="idp112544"></a>Main Procedure of Kernel</h2></div></div></div><li class="step" title="Step 1">Prepare table of process.</li><li class="step" title="Step 2">Run our first process, it is totally another story...</li><li class="step" title="Step 3">Loop, never exit.</li></div></div></body></html>
